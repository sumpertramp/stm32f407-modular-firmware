# â±ï¸ STM32 Basic Timer (TIM6) â€“ Bare Metal Example

This project demonstrates how to use the **STM32 TIM6 Basic Timer** in a **pure bare-metal environment**, without using HAL timer drivers or CubeMX (IOC) configuration.

The timer is configured to generate a **1 ms system tick**, which is then used to toggle an on-board LED periodically.

---

## ðŸ“Œ Key Features

- Pure **bare-metal** timer implementation
- No HAL timer APIs
- No CubeMX / IOC configuration for TIM6
- Direct register-level programming (RCC, TIM, NVIC)
- Clean separation between driver and interrupt handler
- Reusable and scalable firmware design

---

## ðŸ§  What Is a Basic Timer?

Basic timers (TIM6 / TIM7):

- Do not have GPIO outputs
- Do not support PWM or input capture
- Are designed only to generate:
  - Time bases
  - Periodic interrupts
  - Software timing infrastructure

Because of this, they are ideal for:

- System tick generation
- Software timers
- Cooperative schedulers
- Delay-free timing logic
- SysTick alternatives

---

## ðŸ§± Project Structure
---
```text
Core/
â”œâ”€ Src/
â”‚ â”œâ”€ drivers/
â”‚ â”‚ â””â”€ basic_timer/
â”‚ â”‚ â”œâ”€ basic_timer.c
â”‚ â”‚ â””â”€ basic_timer.h
â”‚ â”œâ”€ stm32f4xx_it.c
â”‚ â””â”€ main.c

---

## âš™ï¸ Timer Configuration (TIM6)

The basic timer (TIM6) is configured to generate a **1 ms system tick** using direct register access.

| Parameter | Value |
|--------|------|
| Timer clock | 84 MHz |
| Prescaler | 84 âˆ’ 1 |
| Timer counter frequency | 1 MHz |
| Auto-reload (ARR) | 1000 âˆ’ 1 |
| Tick period | **1 ms** |

This configuration ensures a precise and stable time base without relying on SysTick or HAL timer drivers.

---

## ðŸ”§ Driver Design

The timer logic is fully encapsulated inside the **basic_timer driver**.

### Responsibilities of the driver

- Enable TIM6 peripheral clock
- Configure prescaler and auto-reload registers
- Enable update interrupt
- Enable NVIC interrupt
- Start the timer counter
- Maintain a millisecond tick counter

### Public API

```c
void basic_timer_init(void);
uint32_t basic_timer_get_tick(void);

```c

## âš¡ Interrupt Handling Strategy

The auto-generated CubeMX interrupt file **stm32f4xx_it.c** is **not modified**.

The TIM6 interrupt handler only delegates timing logic to the driver layer:

```c
void TIM6_DAC_IRQHandler(void)
{
    if (TIM6->SR & TIM_SR_UIF)
    {
        TIM6->SR &= ~TIM_SR_UIF;
        basic_timer_irq_handler();
    }
}

```c

## ðŸ’¡ Example Usage â€“ LED Toggle (Summary)

A 1 ms system tick generated by the TIM6 basic timer is used to toggle an on-board LED every 500 ms.  
The implementation is fully non-blocking and does not rely on delay functions.

This approach enables multiple tasks to share the same time base, resulting in a clean, scalable, and responsive bare-metal firmware design.




